---
sidebar_position: 5
title: Add a custom chain
description: Learn how to add custom chains to your project.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# Add a custom chain

This recipe demonstrates how to add a custom chain to your project. We'll use Base as an example, but you can apply this process to any other chain you want to add. Normally, Base already exists in viem/chains and you can import it and use it, but we're going to add it manually to show you how to do it.

:::info
Scaffold-ETH 2 consists of two parts:

- `packages/nextjs`: nextjs frontend
- `packages/hardhat` or `packages/foundry`: hardhat or foundry to deploy smart contracts

The frontend and the hardhat/foundry project use a different set of chains. 
You should add the chain to both the frontend and your hardhat/foundry config.

By doing this, you will be able to deploy the contracts to the chain you added and interact with them from the frontend.  

:::

<details open>
<summary>Here is how you can add a chain that exists in viem/chains:</summary>

[viem/chains](https://viem.sh/docs/chains/introduction) is an entrypoint for popular EVM-compatible chains. Most of the time, the chain you need will be there. 
To add a chain that is in viem/chains, you can add it to the `targetNetworks` array in your `scaffold.config.ts` file with the `chains.` prefix. In the example below we are adding Optimism.

```tsx title="packages/nextjs/scaffold.config.ts"
import * as chains from "viem/chains";

export type ScaffoldConfig = {
  targetNetworks: readonly chains.Chain[];
  pollingInterval: number;
  alchemyApiKey: string;
  walletConnectProjectId: string;
  onlyLocalBurnerWallet: boolean;
};

const scaffoldConfig = {
  // The networks on which your DApp is live

  // Below we are adding Optimism to the list of chains.
  // highlight-start
  targetNetworks: [chains.hardhat, chains.optimism],
  // highlight-end

  // The interval at which your front-end polls the RPC servers for new data
  // it has no effect if you only target the local network (default is 4000)
  pollingInterval: 30000,

  // This is ours Alchemy's default API key.
  // You can get your own at https://dashboard.alchemyapi.io
  // It's recommended to store it in an env variable:
  // .env.local for local testing, and in the Vercel/system env config for live apps.
  alchemyApiKey: process.env.NEXT_PUBLIC_ALCHEMY_API_KEY || "oKxs-03sij-U_N0iOlrSsZFr29-IqbuF",

  // This is ours WalletConnect's default project ID.
  // You can get your own at https://cloud.walletconnect.com
  // It's recommended to store it in an env variable:
  // .env.local for local testing, and in the Vercel/system env config for live apps.
  walletConnectProjectId: process.env.NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID || "3a8170812b534d0ff9d794f19a901d64",

  // Only show the Burner Wallet when running on hardhat network
  onlyLocalBurnerWallet: true,
} as const satisfies ScaffoldConfig;

export default scaffoldConfig;
```

After adding the chain to the `targetNetworks` array, you should add the chain to the `networks` object in your `hardhat.config.ts` file to be able to deploy to it.

```typescript title="packages/hardhat/hardhat.config.ts"
networks: {
    // ... other networks
    optimism: {
        url: "https://mainnet.optimism.io",
        accounts: [deployerPrivateKey]
    },
}
```

</details>

## Step 1: Define the chain

First, create a new file called `customChains.ts` in your `packages/nextjs/utils/` directory.

```bash
touch packages/nextjs/utils/customChains.ts
```

Open the file with your favorite editor and add the following code to define the chain.

```typescript title="packages/nextjs/utils/customChains.ts"
import { defineChain } from "viem";

// Base chain
export const base = defineChain({
  id: 8453,
  name: "Base",
  nativeCurrency: { name: "Base", symbol: "ETH", decimals: 18 },
  rpcUrls: {
    default: {
      http: ["https://mainnet.base.org"],
    },
    public: {
      http: ["https://mainnet.base.org"],
    },
  },
  blockExplorers: {
    default: {
      name: "Basescan",
      url: "https://basescan.org",
    },
    etherscan: {
      name: "Basescan",
      url: "https://basescan.org",
    },
  },
  contracts: {
    multicall3: {
      address: "0xca11bde05977b3631167028862be2a173976ca11",
      blockCreated: 5022,
    },
  },
});
```

In this file, we're defining the Base chain. We're using the `defineChain` function from viem to define the chain. You can add as many chains as you want to the `customChains.ts` file.

## Step 2: Update `scaffold.config.ts`

Next, update your `scaffold.config.ts` file to include the new chain:

```typescript title="packages/nextjs/scaffold.config.ts"
import { base } from "./utils/customChains";
// ... other imports and type definitions

const scaffoldConfig = {
  targetNetworks: [base],
  // ... other configuration options
} as const satisfies ScaffoldConfig;

export default scaffoldConfig;
```

If you'd like to add multiple chains, you can do so by adding them to the `targetNetworks` array. Below is a simple example of how to add multiple chains.

```typescript title="packages/nextjs/scaffold.config.ts"
import { base, baseSepolia } from "./utils/customChains";

const scaffoldConfig = {
  targetNetworks: [base, baseSepolia],
  // ... other configuration options
} as const satisfies ScaffoldConfig;
```

### Step 3: Update configuration

To deploy to these new chains, you'll need to update your configuration. Add the following to your configuration file.

```mdx-code-block
<Tabs groupId="dev-tool">
<TabItem value="hardhat" label="Hardhat" default>
```

```typescript title="packages/hardhat/hardhat.config.ts"
networks: {
    // ... other networks
    base: {
        url: "https://mainnet.base.org",
        accounts: [deployerPrivateKey]
    },
}
```

If you'd like to add multiple chains, you can do so by adding them to the networks object.

```typescript title="packages/hardhat/hardhat.config.ts"
networks: {
    // ... other networks
    base: {
        url: "https://mainnet.base.org",
        accounts: [deployerPrivateKey]
    },
    baseSepolia: {
        url: "https://sepolia.base.org",
        accounts: [deployerPrivateKey]
    },
}
```

```mdx-code-block
</TabItem>
<TabItem value="foundry" label="Foundry">
```

```toml title="packages/foundry/foundry.toml"
[rpc_endpoints]
...other chains
base = "https://mainnet.base.org"
```

If you'd like to add multiple chains, you can do so by adding them to the rpc_endpoints section.

```toml title="packages/foundry/foundry.toml"
[rpc_endpoints]
...other chains
base = "https://mainnet.base.org"
base_sepolia = "https://sepolia.base.org"
```

</TabItem>
</Tabs>

### Step 4: Deploy to the new chain

Now you can deploy your contracts to these new chains using the deploy command

```bash
yarn deploy --network base
```
